<polymer-element name="timeago" attributes="datetime refresh delay lang">

	<template>
		<span id="timeago"></span>
	</template>

	<script>
		function Timeago (datetime, lang) {
			var _moment = null,
					_localLang = null;

			this.getTimeAgoText = function () {
				return _moment.fromNow();
			};

			this.refresh = function (element) {
				element.innerHTML = this.getTimeAgoText();
			};

			(function (datetime, lang)
			{
				_localLang = lang || "en";
				_moment = moment(datetime, 'YYYY-MM-DD HH:mm:ss');
				_moment.lang(_localLang);
			}) (datetime, lang);
		};

		Polymer('timeago', {
			created: function() {
				var datetime = this.datetime,
						element = this.$.timeago,
						timeago = new Timeago(datetime, this.lang);
				
				element.innerHTML = timeago.getTimeAgoText();

				if (this.refresh === true) {
					setInterval(function () {
						timeago.refresh(element);
					}, this.delay);
				}
			},
			datetime: '0000-00-00 00:00:00',
			refresh: true,
			delay: 60000
		});
	</script>

</polymer-element>