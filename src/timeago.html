<polymer-element name="timeago" attributes="datetime refresh delay lang">

	<template>
		<span id="timeago"></span>
	</template>

	<script>
		Timeago = {
			moment: null,

			init: function (lang)
			{
				this.moment = moment();
				this.moment.format('YYYY-MM-DD HH:mm:ss');
				this.moment.lang(lang);
			},

			getTimeAgoText: function (datetime) {
				this.moment.add(datetime);
				return this.moment.fromNow();
			},

			refresh: function (element, datetime) {
				element.innerHTML = this.getTimeAgoText(datetime);
			}
		};

		Polymer('timeago', {
			created: function() {
				var datetime = this.datetime,
					element = this.$.timeago;

				Timeago.init(this.lang);
				element.innerHTML = Timeago.getTimeAgoText(this.datetime);

				if (this.refresh === true) {
					setInterval(function () {
						Timeago.refresh(element, datetime);
					}, this.delay);
				}
			},
			datetime: '0000-00-00 00:00:00',
			refresh: true,
			delay: 60000
		});
	</script>

</polymer-element>